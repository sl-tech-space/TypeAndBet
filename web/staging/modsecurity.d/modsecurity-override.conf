# ===== ModSecurity 3.0 カスタム設定（owasp/modsecurityイメージ拡張） =====

# 標準設定を上書き
SecRuleEngine On
SecAuditLog /var/log/nginx/modsec_audit.log
SecAuditLogStorageDir /var/log/nginx/modsec_audit/
SecDebugLog /var/log/nginx/modsec_debug.log
SecDebugLogLevel 3

# ゲーム用の基本設定
SecAction "id:1000,phase:1,t:none,setvar:tx.game_mode=1,log,pass,msg:'Game mode enabled'"
SecAction "id:1001,phase:1,t:none,setvar:tx.session_timeout=3600,log,pass,msg:'Game session timeout set to 1 hour'"

# カスタムルールファイルの読み込み
Include /etc/custom-modsecurity.d/exclusions.conf
Include /etc/custom-modsecurity.d/rules.conf
